#!/bin/bash

# 
# @author Michael Cannon <michael@typo3vagabond.com>

# have an arguement
if [ ! "$1" ]
then
	echo "Usage: `basename $0` file [dig] [own dns]"
	echo "Example: `basename $0` file_of_domain_names_one_per_line 1"
	exit 65
fi

FILE=$1

if [ -n "$2" ]
then
	DIG="true"
else
	DIG="false"
fi

if [ -n "$3" ]
then
	DIG_CBNS1="true"
else
	DIG_CBNS1="false"
fi

for DOMAIN in `cat ${FILE}`
do
	host ${DOMAIN}

	if [[ "true" -eq "${DIG}" ]]
	then
		echo dig ${DOMAIN} 
		dig ${DOMAIN} 
	fi

	if [[ "true" -eq "${DIG_CBNS1}" ]]
	then
		echo dig ${DOMAIN} @ns1.typo3vagabond.com
		dig ${DOMAIN} @ns1.typo3vagabond.com
	fi
done